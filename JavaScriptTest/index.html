<canvas id="test" width="500" height="500"></canvas>
<script type="text/javascript" src="js/config.js"></script>
<script type="text/javascript" src="js/character.js"></script>
<script type="text/javascript" src="js/gun.js"></script>
<script type="text/javascript" src="js/map.js"></script>
<script type="text/javascript" src="js/sprite.js"></script>
<script>
    var canvas = document.getElementById("test");
    var neededFiles = ["tiles.json"];


    function loadJSONFile(callback, file) {

        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('GET', file, false); // Replace 'my_data' with the path to your file
        xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
                callback(xobj.responseText);
            }
        };
        xobj.send(null);
    }

    for (var x of neededFiles) {

        loadJSONFile(function (response) {
            loadSprites(response, canvas);
        }, "./resources/" + x);
    }

    //loads in the test "map"
    loadJSONFile(function (response) {
        var map = new MAP(canvas, response);
    }, "./resources/map1.json")

 
    

    //setInterval(speed, 1000 / 1);
    //function speed() {
    //    if (char.getVSpeed() > 0) {
    //        char.setVSpeed((char.getVSpeed() - 0.5));
    //                    }
    //    if (char.getHSpeed() > 0) {
    //        char.getHSpeed()  = 0;
    //    }

    //   console.log("Char vspeed: " + char.getVSpeed() + " Hspeed: " + char.getHSpeed());
    //}

    //document.onkeypress = function (e) {vvvaw
    //    e = e || window.event;
    //    var charCode = (typeof e.which == "number") ? e.which : e.keyCode;
    //    if (charCode) {
    //        switch (conf[charCode]) {
    //            case "up":
    //                char.vs = 5;
    //                break;
    //            case "left":
    //                char.hs = -5;
    //                break;
    //            case "right":
    //                char.hs = 5;
    //                break;
    //        }

    //    }
    //};


</script>