<div id="main" style="height:500px; width:720px;  position: absolute; margin: auto; top: 0;right: 0; left: 0; bottom: 0;border: 2px solid;">
    <div id="gameDiv" style="overflow:hidden; " />
</div>

<script type="text/javascript" src="shop.js"></script>
<script type="text/javascript" src="js/config.js"></script>
<script type="text/javascript" src="js/entities.js"></script>
<script type="text/javascript" src="js/gun.js"></script>
<script type="text/javascript" src="js/level.js"></script>
<script type="text/javascript" src="js/sprite.js"></script>
<script type="text/javascript" src="js/util.js"></script>
<script type="text/javascript" src="js/overworld.js"></script>

<script>

    var container = document.getElementById("gameDiv");
    var canvas = create("canvas", "fg", 0, 0, 720, 500);

    function create(type, id, left, top, width, height) {
        var elem = document.createElement(type);
        elem.id = id;
        if (left != 0) { elem.style.left = left; }
        if (top != 0) { elem.style.top = top; }
        if (height != 0) {
            elem.height = height;
        }
        if (width != 0) {
            elem.width = width;
        }
        if (id != "bg") {
            container.appendChild(elem);
        }
        return elem;
    }
    var shop = loadShop();
    var conf = [];
    conf[65] = "left";
    conf[68] = "right";
    conf[83] = "down";
    conf[87] = "up";

    var interval = setInterval(update, 1000 / 60);

    function update() {
        canvas.getContext("2d").clearRect(0, 0, 720, 500);
        shop.openShop();
    }
    document.onkeydown = function (e) {
        e = e || window.event;
        var charCode = (typeof e.which == "number") ? e.which : e.keyCode;
        switch (conf[charCode]) {
            case "down":
                shop.setSelectItem(1);
                break;
            case "up":
                shop.setSelectItem(-1);
                break;
            case "right":
                shop.itemSelected = true;
                break;
            case "left":
                shop.itemSelected = false;
                break;
        }

    }

</script>

